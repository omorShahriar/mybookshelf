{"version":3,"sources":["BooksAPI.js","components/Book.js","components/BookShelf.js","components/BooksApp.js","components/SearchBooks.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","update","book","shelf","fetch","concat","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","then","res","json","search","query","data","books","Book","state","selectedShelf","_this","props","handleChange","e","setState","target","value","changeShelf","react_default","a","createElement","className","style","width","height","backgroundImage","this","imageLinks","thumbnail","onChange","disabled","title","authors","React","Component","BookShelf","_ref","heading","map","components_Book","key","BooksApp","filterBook","length","filter","Fragment","components_BookShelf","es","to","SearchBooks","searchedBooks","handleSearch","Array","isArray","catch","err","console","log","_this2","type","placeholder","App","loading","info","some","b","BooksAPI","newBook","components_BooksApp","path","process","components_SearchBooks","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"6PACMA,EAAM,wCAIRC,EAAQC,aAAaD,MACpBA,IACHA,EAAQC,aAAaD,MAAQE,KAAKC,SAASC,SAAS,IAAIC,QAAQ,IAElE,IAAMC,EAAU,CACdC,OAAU,mBACVC,cAAiBR,GAaNS,EAAS,SAACC,EAAMC,GAAP,OACpBC,MAAK,GAAAC,OAAId,EAAJ,WAAAc,OAAiBH,EAAKI,IAAM,CAC/BC,OAAQ,MACRT,QAAQU,OAAAC,EAAA,EAAAD,CAAA,GACHV,EADE,CAELY,eAAgB,qBAElBC,KAAMC,KAAKC,UAAU,CAAEV,YACtBW,KAAK,SAAAC,GAAG,OAAIA,EAAIC,UAERC,EAAS,SAACC,GAAD,OACpBd,MAAK,GAAAC,OAAId,EAAJ,WAAkB,CACrBgB,OAAQ,OACRT,QAAQU,OAAAC,EAAA,EAAAD,CAAA,GACHV,EADE,CAELY,eAAgB,qBAElBC,KAAMC,KAAKC,UAAU,CAAEK,YACtBJ,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAK,GAAI,OAAIA,EAAKC,SCORC,6MA/CbC,MAAQ,CACNC,cAAeC,EAAKC,MAAMvB,KAAKC,OAAS,UAE1CuB,aAAe,SAAAC,GACbH,EAAKI,SAAS,CAAEL,cAAeI,EAAEE,OAAOC,OAAS,WAC/CN,EAAKC,MAAMM,YAAY,CACrB5B,MAAOqB,EAAKF,MAAMC,cAClBrB,KAAMsB,EAAKC,MAAMvB,kFAKrB,OACE8B,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,aACVC,MAAO,CACLC,MAAO,IACPC,OAAQ,IACRC,gBAAe,OAAAlC,OAASmC,KAAKf,MAAMvB,KAAKuC,WAAWC,UAApC,QAGnBV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,UACEJ,MAAOU,KAAKlB,MAAMC,cAClBoB,SAAUH,KAAKd,cAEfM,EAAAC,EAAAC,cAAA,UAAQJ,MAAM,OAAOc,UAAQ,GAA7B,cAGAZ,EAAAC,EAAAC,cAAA,UAAQJ,MAAM,oBAAd,qBACAE,EAAAC,EAAAC,cAAA,UAAQJ,MAAM,cAAd,gBACAE,EAAAC,EAAAC,cAAA,UAAQJ,MAAM,QAAd,QACAE,EAAAC,EAAAC,cAAA,UAAQJ,MAAM,QAAd,WAINE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcK,KAAKf,MAAMvB,KAAK2C,OAC7Cb,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgBK,KAAKf,MAAMvB,KAAK4C,kBAzCtCC,IAAMC,WCeVC,EAfG,SAAAC,GAAiC,IAA/BC,EAA+BD,EAA/BC,QAAQ/B,EAAuB8B,EAAvB9B,MAAMW,EAAiBmB,EAAjBnB,YAC9B,OACIC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACXH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,mBAAmBgB,GACjCnB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACjBH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACXf,EAAMgC,IAAI,SAAClD,GAAD,OAAU8B,EAAAC,EAAAC,cAACmB,EAAD,CAAMC,IAAKpD,EAAKI,GAAIJ,KAAMA,EAAM6B,YAAaA,iBCkC/DwB,EAvCE,SAAAL,GAA4B,IAAzB9B,EAAyB8B,EAAzB9B,MAAOW,EAAkBmB,EAAlBnB,YACnByB,EAAa,SAAArD,GACjB,GAAIiB,EAAMqC,OACR,OAAOrC,EAAMsC,OAAO,SAAAxD,GAAI,OAAIA,EAAKC,QAAUA,KAG/C,OACE6B,EAAAC,EAAAC,cAAAF,EAAAC,EAAA0B,SAAA,KACE3B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,sBAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAC0B,EAAD,CACET,QAAQ,oBACR/B,MAAOoC,EAAW,oBAClBzB,YAAaA,IAEfC,EAAAC,EAAAC,cAAC0B,EAAD,CACET,QAAQ,eACR/B,MAAOoC,EAAW,cAClBzB,YAAaA,IAEfC,EAAAC,EAAAC,cAAC0B,EAAD,CACET,QAAQ,OACR/B,MAAOoC,EAAW,QAClBzB,YAAaA,MAInBC,EAAAC,EAAAC,cAAC2B,EAAA,EAAD,CAAMC,GAAG,eACP9B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,gCC2BK6B,oNAxDbzC,MAAQ,CACNJ,MAAO,GACP8C,cAAe,MAGjBC,aAAe,SAAAtC,GACbH,EAAKI,SAAS,CAAEV,MAAOS,EAAEE,OAAOC,OAAS,WACvCb,EAAOO,EAAKF,MAAMJ,OACfJ,KAAK,SAAAC,GAAG,OACPmD,MAAMC,QAAQpD,GACVS,EAAKI,SAAS,CAAEoC,cAAejD,IAC/BS,EAAKI,SAAS,CAAEoC,cAAe,OAEpCI,MAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,gFAGvB,IAAAG,EAAAhC,KACP,OACER,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAC2B,EAAA,EAAD,CAAMC,GAAG,KACP9B,EAAAC,EAAAC,cAAA,UAAQC,UAAU,gBAAlB,UAGFH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,8BAQbH,EAAAC,EAAAC,cAAA,SACEuC,KAAK,OACLC,YAAY,4BACZ5C,MAAOU,KAAKlB,MAAMJ,MAClByB,SAAUH,KAAKyB,iBAIrBjC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACXK,KAAKlB,MAAM0C,cAAcZ,IAAI,SAAAlD,GAAI,OAChC8B,EAAAC,EAAAC,cAACmB,EAAD,CACEC,IAAKpD,EAAKI,GACVJ,KAAMA,EACN6B,YAAayC,EAAK/C,MAAMM,0BA/CdgB,IAAMC,YC0DjB2B,6MAvDbrD,MAAQ,CAONF,MAAO,GACPwD,SAAS,KAQX7C,YAAc,SAAA8C,GAAQ,IACZ1E,EAAgB0E,EAAhB1E,MAAOD,EAAS2E,EAAT3E,KACf,GAAIsB,EAAKF,MAAMF,MAAM0D,KAAK,SAAAC,GAAC,OAAIA,EAAEzE,KAAOJ,EAAKI,KAC3CkB,EAAKI,SACH,SAAAN,GAAK,MAAK,CACRF,MAAOE,EAAMF,MAAMgC,IAAI,SAAA2B,GAAC,OAAKA,EAAEzE,KAAOJ,EAAKI,GAAdE,OAAAC,EAAA,EAAAD,CAAA,GAAwBuE,EAAxB,CAA2B5E,UAAU4E,MAEpE,kBAAMC,EAAgB9E,EAAMC,SAEzB,CACL,IAAM8E,EAAOzE,OAAAC,EAAA,EAAAD,CAAA,GAAQN,EAAR,CAAcC,UAC3BqB,EAAKI,SACH,SAAAN,GAAK,MAAK,CACRF,MAAOE,EAAMF,MAAMf,OAAO4E,KAE5B,kBAAMD,EAAgB9E,EAAMC,0FArBd,IAAAqE,EAAAhC,KLEpBpC,MAAK,GAAAC,OAAId,EAAJ,UAAiB,CAAEO,YACrBgB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAK,GAAI,OAAIA,EAAKC,QKHDN,KAAK,SAAAC,GAAG,OACxByD,EAAK5C,SAAS,CAAER,MAAOL,EAAK6D,SAAS,uCAwBvC,OACE5C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACZK,KAAKlB,MAAMsD,QACV5C,EAAAC,EAAAC,cAAA,qBAEAF,EAAAC,EAAAC,cAAC2B,EAAA,EAAD,KACE7B,EAAAC,EAAAC,cAACgD,EAAD,CACEC,KAAMC,gBACNhE,MAAOoB,KAAKlB,MAAMF,MAClBW,YAAaS,KAAKT,cAEpBC,EAAAC,EAAAC,cAACmD,EAAD,CAAaF,KAAK,cAAcpD,YAAaS,KAAKT,uBAhD5CgB,IAAMC,iBCFxBsC,IAASC,OAAOvD,EAAAC,EAAAC,cAACsD,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.f45cf98b.chunk.js","sourcesContent":["\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)\r\n","import React from \"react\";\r\n\r\nclass Book extends React.Component {\r\n  state = {\r\n    selectedShelf: this.props.book.shelf || \"move\"\r\n  };\r\n  handleChange = e => {\r\n    this.setState({ selectedShelf: e.target.value }, () => {\r\n      this.props.changeShelf({\r\n        shelf: this.state.selectedShelf,\r\n        book: this.props.book\r\n      });\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <li>\r\n        <div className=\"book\">\r\n          <div className=\"book-top\">\r\n            <div\r\n              className=\"book-cover\"\r\n              style={{\r\n                width: 128,\r\n                height: 193,\r\n                backgroundImage: `url(${this.props.book.imageLinks.thumbnail})`\r\n              }}\r\n            />\r\n            <div className=\"book-shelf-changer\">\r\n              <select\r\n                value={this.state.selectedShelf}\r\n                onChange={this.handleChange}\r\n              >\r\n                <option value=\"move\" disabled>\r\n                  Move to...\r\n                </option>\r\n                <option value=\"currentlyReading\">Currently Reading</option>\r\n                <option value=\"wantToRead\">Want to Read</option>\r\n                <option value=\"read\">Read</option>\r\n                <option value=\"none\">None</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"book-title\">{this.props.book.title}</div>\r\n          <div className=\"book-authors\">{this.props.book.authors}</div>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Book;\r\n","import React from 'react'\r\nimport Book from './Book'\r\nconst BookShelf = ({heading,books,changeShelf}) => {\r\n    return (\r\n        <div className=\"bookshelf\">\r\n            <h2 className=\"bookshelf-title\">{heading}</h2>\r\n            <div className=\"bookshelf-books\">\r\n          <ol className=\"books-grid\">\r\n            {books.map((book) => <Book key={book.id} book={book} changeShelf={changeShelf} /> )}\r\n          </ol>\r\n        </div>\r\n        </div>\r\n    )\r\n        \r\n    \r\n}\r\n\r\nexport default BookShelf","import React from \"react\";\r\nimport BookShelf from \"./BookShelf\";\r\nimport { Link } from \"@reach/router\";\r\nconst BooksApp = ({ books, changeShelf }) => {\r\n  const filterBook = shelf => {\r\n    if (books.length) {\r\n      return books.filter(book => book.shelf === shelf);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"list-books\">\r\n        <div className=\"list-books-title\">\r\n          <h1>MyReads</h1>\r\n        </div>\r\n        <div className=\"list-books-content\">\r\n          <BookShelf\r\n            heading=\"Currently Reading\"\r\n            books={filterBook(\"currentlyReading\")}\r\n            changeShelf={changeShelf}\r\n          />\r\n          <BookShelf\r\n            heading=\"Want To Read\"\r\n            books={filterBook(\"wantToRead\")}\r\n            changeShelf={changeShelf}\r\n          />\r\n          <BookShelf\r\n            heading=\"Read\"\r\n            books={filterBook(\"read\")}\r\n            changeShelf={changeShelf}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Link to=\"search-book\">\r\n        <div className=\"open-search\">\r\n          <button>Add a book</button>\r\n        </div>\r\n      </Link>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BooksApp;\r\n","import React from \"react\";\r\nimport { Link } from \"@reach/router\";\r\nimport Book from \"./Book\";\r\nimport { search } from \"../BooksAPI\";\r\n\r\nclass SearchBooks extends React.Component {\r\n  state = {\r\n    query: \"\",\r\n    searchedBooks: []\r\n  };\r\n\r\n  handleSearch = e => {\r\n    this.setState({ query: e.target.value }, () => {\r\n      search(this.state.query)\r\n        .then(res =>\r\n          Array.isArray(res)\r\n            ? this.setState({ searchedBooks: res })\r\n            : this.setState({ searchedBooks: [] })\r\n        )\r\n        .catch(err => console.log(err));\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"search-books\">\r\n        <div className=\"search-books-bar\">\r\n          <Link to=\"/\">\r\n            <button className=\"close-search\">Close</button>\r\n          </Link>\r\n\r\n          <div className=\"search-books-input-wrapper\">\r\n            {/* NOTES: The search from BooksAPI is limited to a particular set of search terms.\r\n                    You can find these search terms here:\r\n                    https://github.com/udacity/reactnd-project-myreads-starter/blob/master/SEARCH_TERMS.md\r\n  \r\n                    However, remember that the BooksAPI.search method DOES search by title or author. So, don't worry if\r\n                    you don't find a specific author or title. Every search is limited by search terms. */}\r\n\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by title or author\"\r\n              value={this.state.query}\r\n              onChange={this.handleSearch}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"search-books-results\">\r\n          <ol className=\"books-grid\">\r\n            {this.state.searchedBooks.map(book => (\r\n              <Book\r\n                key={book.id}\r\n                book={book}\r\n                changeShelf={this.props.changeShelf}\r\n              />\r\n            ))}\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBooks;\r\n","import React from \"react\";\r\nimport * as BooksAPI from \"./BooksAPI\";\r\nimport BooksApp from \"./components/BooksApp\";\r\nimport \"./App.css\";\r\nimport { Router } from \"@reach/router\";\r\nimport SearchBooks from \"./components/SearchBooks\";\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    /**\r\n     * TODO: Instead of using this state variable to keep track of which page\r\n     * we're on, use the URL in the browser's address bar. This will ensure that\r\n     * users can use the browser's back and forward buttons to navigate between\r\n     * pages, as well as provide a good URL they can bookmark and share.\r\n     */\r\n    books: [],\r\n    loading: true\r\n  };\r\n  componentDidMount() {\r\n    BooksAPI.getAll().then(res =>\r\n      this.setState({ books: res, loading: false })\r\n    );\r\n  }\r\n\r\n  changeShelf = info => {\r\n    const { shelf, book } = info;\r\n    if (this.state.books.some(b => b.id === book.id)) {\r\n      this.setState(\r\n        state => ({\r\n          books: state.books.map(b => (b.id === book.id ? { ...b, shelf } : b))\r\n        }),\r\n        () => BooksAPI.update(book, shelf)\r\n      );\r\n    } else {\r\n      const newBook = { ...book, shelf };\r\n      this.setState(\r\n        state => ({\r\n          books: state.books.concat(newBook)\r\n        }),\r\n        () => BooksAPI.update(book, shelf)\r\n      );\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        {this.state.loading ? (\r\n          <h1>Loading</h1>\r\n        ) : (\r\n          <Router>\r\n            <BooksApp\r\n              path={process.env.PUBLIC_URL + \"/\"}\r\n              books={this.state.books}\r\n              changeShelf={this.changeShelf}\r\n            />\r\n            <SearchBooks path=\"search-book\" changeShelf={this.changeShelf} />\r\n          </Router>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}